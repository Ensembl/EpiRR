{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://epigenomesportal.ca/schemas/experiment_bisulfite-seq.json",
    "title": "IHEC Data Hub Experiment Bisulfite-Seq schema",
    "description": "IHEC Data Hub Experiment Bisulfite-Seq schema",
    "type" : "object",
    "properties": {
        "reference_registry_id" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The IHEC EpiRR ID for this dataset, only for IHEC Reference Epigenome datasets. Otherwise leave empty."}},
		"qc_flags" : {"type": "array", "minItems": 1, "items": {"type": "string", "description": "Any quanlity control observations can be noted here. This field can be omitted if empty"}},
        "experiment_type" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "enum": ["DNA Methylation"]}},
        "experiment_ontology_curie": {"type": "array", "minItems": 1, "items": {"type": "string", "pattern": "^obi:[0-9]{7}$", "description": "(Ontology: OBI). Links to experiment ontology information."}},
        "library_strategy" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "enum": ["Bisulfite-Seq"]}},
        "molecule_ontology_curie" : {"type":"array", "items":{"type": "string", "pattern": "^so:[0-9]{7}$", "description": "(Ontology: SO). Links to molecule ontology information."}},
        "molecule" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "enum": ["genomic DNA"]}},

        "extraction_protocol" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The protocol used to isolate the extract material."}},
        "extraction_protocol_type_of_sonicator" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The type of sonicator used for extraction."}},
        "extraction_protocol_sonication_cycles" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The number of sonication cycles used for extraction."}},
        "dna_preparation_initial_dna_qnty" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The initial DNA quantity used in preparation."}},
        "dna_preparation_fragment_size_range" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The DNA fragment size range used in preparation."}},
        "dna_preparation_adaptor_sequence" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The sequence of the adaptor used in preparation."}},
        "dna_preparation_adaptor_ligation_protocol" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The protocol used for adaptor ligation."}},
        "dna_preparation_post-ligation_fragment_size_selection" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The fragment size selection after adaptor ligation."}},
        "bisulfite_conversion_protocol" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The bisulfite conversion protocol."}},
        "bisulfite_conversion_percent" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The bisulfite conversion percent and how it was determined."}},
        "library_generation_pcr_template_conc" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The PCR template concentration for library generation."}},
        "library_generation_pcr_polymerase_type" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The PCR polymerase used for library generation"}},
        "library_generation_pcr_thermocycling_program" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The thermocycling program used for library generation."}},
        "library_generation_pcr_number_cycles" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The number of PCR cycles used for library generation."}},
        "library_generation_pcr_f_primer_sequence" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The sequence of the PCR forward primer used for library generation."}},
        "library_generation_pcr_r_primer_sequence" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The sequence of the PCR reverse primer used for library generation."}},
        "library_generation_pcr_primer_conc" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The concentration of the PCR primers used for library generation."}},
        "library_generation_pcr_product_isolation_protocol" : {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string", "description": "The protocol for isolating PCR products used for library generation."}}
    },
    "required": ["library_strategy", "molecule", "molecule_ontology_curie"],
    "anyOf":    [{"required": ["experiment_ontology_curie"]}, {"required": ["experiment_type"]}]
}